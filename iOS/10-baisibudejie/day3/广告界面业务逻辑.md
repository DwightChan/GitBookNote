# 广告界面业务逻辑



- 发送请求(数据)
    - http协议
    - 请求: get/ post
        - 请求头: 描述客户端支持哪些数据格式, 请求 url+ 参数
        - 请求体:
    - 响应
        - 响应头: content-type:描述服务器给数据格式
        - 响应体
    - 这里content-type : text/htmel数据格式, 是服务器写错了, 但是后台不会改, 这时候, 就要我们自己修改响应头的格式接收响应, 
    - 课堂上老师是直接修改框架的内容, 但是如果上传到git备份, 这时候第三方框架是不会上传, 也就只能在本地使用, 因此最好自己在外部写个分类, 修改


- 请求成功回调, 解析数据
    - 写为plist文件
    - 根据获取到的plist文件分析, 可以直接找出AD的数据类型, 解析数据
    - 字典转模型, 模型属性定义需要的属性即可, 
    - 使用MJExtension 框架, 字典转模型(cocoapod pod 第三方框架)
    - 展示界面(像这种一次性使用的控件, 用懒加载),展示广告, 定义一个UIImageView的属性, 在懒加载的时候将UIimageView添加到对应的父控件View上
    - 使用SDW...第三方框架加载广告图片
    - 图片有可能太大, 这时候要做比例缩放
        - 注意: 在做缩放的时候, 如果没有图片则乘除数据为 "0", 如果是0 , 则图片数据有问题, 这时候什么也不做

---
<br/>

- **业务逻辑:**
    - 1.点击广告图片 跳转到广告界面 用Safari打开(最好是用自己的应用中的提供一个UIWindow显示)
    - 2.广告倒计时
    - 3.点击跳过, 直接进入到主框架界面


- **代码实现**
- 加载广告数据
    - 添加手势,在添加图片的懒加载方法中
    - 实现点按手势跳转的方法
        - 跳转到广告界面(记住跳转界面代码)
        - 注意: 广告跳转之后还是在自己应用中的做法, 而不是直接跳转到Safari 中, 如果是直接到别人的应用, 这样自己的应用就成为了别应用的入口了, 用户流失严重
        - 
- 倒计时
    - 在viewDidload方法中创建/使用定时器 NSTimer 定时器
    - 实现定时器调用的方法
        - 注意: 定义的计数变量用static修饰
        - 实现动态时间的数据, (注意显示动态数据的时候如果有一闪一闪的bug , 则修改按钮的样式为自定义的样式)
        - 调用跳转界面的方法, 实现跳转
- 点击跳转
    - 调用跳转的方法
- 实现跳转界面的方法
    - 跳转到主框架界面: push(navigationController), modal(不会销毁广告界面),变更窗口的跟控制器(可以销毁广告界面)
    - 销毁定时器, 拿到定时器(定义定时器属性), 



---
<br/>



a